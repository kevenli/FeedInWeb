{% extends 'layout/index.html' %}
{% block head %}
	<link href="/static/css/feedin-editor.css" rel="stylesheet">
	<script src="/static/js/feedin-editor.js"></script>
	<script src="/static/js/csrf.js"></script>
{% endblock %}

{% block content %}
<input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}">
<input type="hidden" name="feed_id" value="{{feed_id}}">
	<div class="row">
		<div class="dol-md-12">
			<div class="btn-group" role="group" aria-label="...">
				<button id='btnSave'>Save</button>
			  <button id="button" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only">
			  <span class="ui-button-text">Save</span></button>
			</div>
		</div>
	</div>
	<div class="row">
		<div class="col-md-4">
			<div id="div_left_menu">
				<h3>Fetch</h3>
				<div>
					<div control-type="xpathfetch" class="control">
						<label class="ui-button ui-widget ui-state-default ui-button-text-only ui-corner-left ui-corner-right"><span class="ui-button">XPathFetch</span></label>
					</div>
					<div control-type="pagefetch" class="control">
						<label class="ui-button ui-widget ui-state-default ui-button-text-only ui-corner-left ui-corner-right"><span class="ui-button">PageFetch</span></label>
					</div>
				</div>
				<h3>Control</h3>
				<div>ddd</div>
			</div>
		</div>
		<div id="editor" class="col-md-8 edit-region">
			
		</div>
	</div>
	<script>
		$(function(){
				editor = $("#editor").editor({'saveUrl':'/feeds/save'});
				
				$("#btnSave").click(function(){
						console.log(editor.toJson());
						editor.save();
				});
				
				if ($("input[name='feed_id']").val()){
					editor.load($("input[name='feed_id']").val())
				}
		});
		
	</script>
{% endblock %}